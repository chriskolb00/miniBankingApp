<div class="transaction-list">
  <div class="header">
    <h1>Transactions</h1>
    <button class="btn btn-primary" routerLink="/transactions/new">+ New Transaction</button>
  </div>

  <div class="filters">
    <button 
      class="filter-btn" 
      [class.active]="selectedType === 'all'"
      (click)="filterByType('all')">
      All
    </button>
    <button 
      class="filter-btn deposit" 
      [class.active]="selectedType === 'deposit'"
      (click)="filterByType('deposit')">
      Deposits
    </button>
    <button 
      class="filter-btn withdrawal" 
      [class.active]="selectedType === 'withdrawal'"
      (click)="filterByType('withdrawal')">
      Withdrawals
    </button>
    <button 
      class="filter-btn transfer" 
      [class.active]="selectedType === 'transfer'"
      (click)="filterByType('transfer')">
      Transfers
    </button>
  </div>

  <div class="transactions-table" *ngIf="filteredTransactions.length > 0; else noTransactions">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Date & Time</th>
          <th>Account ID</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Description</th>
          <th>Balance Before</th>
          <th>Balance After</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let transaction of filteredTransactions">
          <td>{{ transaction.id }}</td>
          <td>{{ transaction.timestamp | date:'short' }}</td>
          <td>
            <a [routerLink]="['/accounts', transaction.accountId]">{{ transaction.accountId }}</a>
          </td>
          <td>
            <span 
              class="badge" 
              [class.deposit]="transaction.type === 0"
              [class.withdrawal]="transaction.type === 1"
              [class.transfer]="transaction.type === 2">
              {{ getTransactionTypeLabel(transaction.type) }}
            </span>
          </td>
          <td class="amount">
            <span [class.positive]="transaction.type === 0" [class.negative]="transaction.type === 1">
              {{ transaction.type === 1 ? '-' : '+' }}{{ transaction.amount | currencyFormat }}
            </span>
          </td>
          <td>{{ transaction.description }}</td>
          <td>{{ transaction.balanceBefore | currencyFormat }}</td>
          <td>{{ transaction.balanceAfter | currencyFormat }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #noTransactions>
    <div class="no-data">
      <p>No transactions found</p>
      <button class="btn btn-primary" routerLink="/transactions/new">Create Your First Transaction</button>
    </div>
  </ng-template>
</div>
