<div class="transaction-form">
  <div class="form-container">
    <h1>New Transaction</h1>
    
    <form (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="account">Select Account *</label>
        <select 
          id="account" 
          [(ngModel)]="transaction.accountId" 
          name="account"
          (change)="onAccountChange()"
          required
          class="form-control">
          <option value="0">-- Select Account --</option>
          <option *ngFor="let account of accounts" [value]="account.id">
            {{ account.accountNumber }} - {{ account.ownerName }} (Balance: ${{ account.balance.toFixed(2) }})
          </option>
        </select>
      </div>

      <div class="current-balance" *ngIf="selectedAccount">
        <span class="label">Current Balance:</span>
        <span class="value">${{ selectedAccount.balance.toFixed(2) }}</span>
      </div>

      <div class="form-group">
        <label for="type">Transaction Type *</label>
        <select 
          id="type" 
          [(ngModel)]="transaction.type" 
          name="type"
          required
          class="form-control">
          <option [value]="TransactionType.Deposit">Deposit</option>
          <option [value]="TransactionType.Withdrawal">Withdrawal</option>
          <option [value]="TransactionType.Transfer">Transfer</option>
        </select>
      </div>

      <div class="form-group">
        <label for="amount">Amount *</label>
        <input 
          type="number" 
          id="amount" 
          [(ngModel)]="transaction.amount" 
          name="amount"
          min="0.01"
          step="0.01"
          required
          class="form-control">
      </div>

      <div class="expected-balance" *ngIf="selectedAccount && transaction.amount > 0">
        <span class="label">Expected Balance After Transaction:</span>
        <span class="value" [class.warning]="transaction.type === TransactionType.Withdrawal && transaction.amount > selectedAccount.balance">
          ${{ getExpectedBalance().toFixed(2) }}
        </span>
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea 
          id="description" 
          [(ngModel)]="transaction.description" 
          name="description"
          rows="3"
          placeholder="Optional transaction description"
          class="form-control"></textarea>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
        <button type="submit" class="btn btn-primary">Create Transaction</button>
      </div>
    </form>
  </div>
</div>
